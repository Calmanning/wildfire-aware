require(["esri/config","esri/WebMap","esri/views/MapView","esri/widgets/Search","esri/widgets/Home","esri/widgets/DistanceMeasurement2D","esri/Graphic","esri/symbols/SimpleLineSymbol","esri/layers/GraphicsLayer","esri/core/reactiveUtils","esri/geometry/Point","esri/geometry/Circle","esri/layers/support/TileInfo"],((e,t,r,i,n,a,s,o,l,d,c,p,m)=>{"use strict";window.location.host;const u="livingatlasdev.arcgis.com"===window.location.host?{webmapID:"068b64e0e1b740e385fa746758b03750",queryURLs:{aggregatePerimeterURL:"https://services.arcgis.com/jIL9msH9OI208GCb/arcgis/rest/services/Wildfire_aggregated_v1/FeatureServer/1/query",populatedBlockCentroidsURL:"https://services.arcgis.com/jIL9msH9OI208GCb/ArcGIS/rest/services/Populated_Blocks_2023/FeatureServer/2/query"}}:{webmapID:"d4ec5d878d00465cb884a6c610aa5442",queryURLs:{aggregatePerimeterURL:"https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/Wildfire_aggregated_v1/FeatureServer/1/query",populatedBlockCentroidsURL:"https://services.arcgis.com/jIL9msH9OI208GCb/ArcGIS/rest/services/Populated_Blocks_2023/FeatureServer/2/query"}},y=u.webmapID,g=u.queryURLs.aggregatePerimeterURL,h=u.queryURLs.populatedBlockCentroidsURL,v=new URL(window.location.href),b=document.querySelector("#sideBar"),f=document.querySelector("#sideBarToggleArrow"),w=(document.querySelector("#searchContainer"),document.querySelector(".top-right-container")),P=document.getElementById("sideBarInformation"),x=document.querySelector("#fire-list"),S=document.querySelector("#fire-list-Btn"),L=(document.querySelector("#activeFiresDropdown"),document.querySelector("#fireSorting")),T=document.getElementsByClassName("item-header"),I=document.getElementsByClassName("item-content"),E=document.getElementsByClassName("fire-item");const C=[];let H=[];const O=document.querySelectorAll(".sortClass");let F={},A={},D={},R={},k={},M={},N={},q={},$={},G={};const W=document.querySelector("#layers"),j=document.querySelector(".layer-List-Container-background"),_=document.querySelector("#layer-list-button"),B=document.querySelector("#fire-points"),U=document.querySelector("#fire-points-legend"),V=document.querySelector("#fire-perimeters"),z=document.querySelector("#fire-perimeter-legend"),K=document.querySelector("#watchesAndWarnings"),Q=document.querySelector("#watchesAndWarnings-img-legend"),Y=document.querySelector("#satellite-hotspots"),J=document.querySelector("#SatelliteHotSpot-img-legend"),X=document.querySelector("#AQI-today"),Z=document.querySelector("#aqiToday-img-legend"),ee=document.querySelector("#AQI-tomorrow"),te=document.querySelector("#aqiTomorrow-img-legend"),re=document.querySelector("#burned-areas"),ie=document.querySelector("#burnedAreas-img-legend"),ne=document.querySelector("#census-points"),ae=document.querySelector("#population-points-legend"),se=new t({portalItem:{id:y},layers:[]}),oe=new r({container:"viewDiv",spatialReference:102100,popup:{popup:null,autoOpenEnabled:!1}}),le=new l({graphics:[]});se.load().then((()=>{se.basemap.load()})).then((()=>{oe.map=se,document.querySelector(".loader").classList.remove("is-active")})).catch((e=>{console.log(e)}));const de=new i({view:oe,resultGraphicEnabled:!1,popupEnabled:!1,container:w}),ce=new n({view:oe});ce.goToOverride=()=>(ge(),x.style.display="initial",S.style.display="none",P.style.display="none",L.style.display="initial",Fe(),He(),We(),window.screen.width<=820?oe.goTo({zoom:5,center:[255,39],spatialReference:{wkid:102100}},{duration:1e3}):oe.goTo({zoom:4,center:[245,48],spatialReference:{wkid:102100}},{duration:1e3}));const pe=new a({view:oe,unitOptions:["miles","kilometers","meters","feet"]}),me="MEASURE",ue="\n\tClick on the map to start measuring\n\t",ye={messages:{newMeasurement:me,hint:ue}},ge=()=>{window.location.hash=""},he=(oe.when().then((()=>{F=se.allLayers.find((e=>"Current Incidents"===e.title)),F.outFields=["IRWINID","IncidentName","ModifiedOnDateTime","FireDiscoveryDateTime","FireDiscoveryAge","IncidentTypeCategory","DailyAcres","PercentContained"],A=se.allLayers.find((e=>"Current Perimeters Fill"===e.title)),A.outFields=["IrwinID","incidentName","GISAcres","FeatureCategory","IncidentTypeCategory","CurrentDateAge","CreateDate","CreateDateAge","dateCurrent"],D=se.allLayers.find((e=>"Current Perimeters Outline"===e.title)),D.outFields="IrwinID",R=se.allLayers.find((e=>"Weather Watches and Warnings"===e.title)),k=se.allLayers.find((e=>"Satellite Hotspots"===e.title)),q=se.allLayers.find((e=>"Today's AQI Forecast"===e.title)),$=se.allLayers.find((e=>"Tomorrow's AQI Forecast"===e.title)),M=se.allLayers.find((e=>"Burned Areas 1984 - 2020 Fill"===e.title)),N=se.allLayers.find((e=>"Burned Areas Outline"===e.title)),G=se.allLayers.find((e=>"Populated_Blocks_2023"===e.title))})).then((()=>{oe.ui.add(de,"top-right"),oe.ui.move("zoom",{position:"top-right"}),oe.ui.add(ce,"top-right"),se.add(le),oe.ui.add(measurementWrapper,{position:"bottom-right"}),pe.container=measurementWrapper,pe.set(ye),pe.messages.newMeasurement=me,pe.messages.hint=ue,pe.viewModel.palette.pathPrimaryColor=[17,49,43,255],pe.viewModel.palette.pathSecondaryColor=[255,255,255,255],pe.viewModel.palette.handleColor=[255,255,255,255];const e=document.createElement("div");e.setAttribute("class","closeBtn invisible"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="18" width="26"><path d="M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z"></path></svg>',document.querySelector("#measurementWrapper").prepend(e),Ne()})).then((()=>{if(window.location.hash){const e=window.location.hash.substring(3);Ie({newDefaultLocation:e})}else Te()})).then((()=>{_.addEventListener("click",(e=>{he(e)}))})).catch((e=>{console.error(e)})),e=>{"none"===W.style.display?(W.style.display="initial",j.classList.add("blue-background"),ve(),be()):Le()}),ve=()=>{"none"===W.style.display?_.innerText="MAP LAYERS":_.innerText="CLOSE"},be=()=>{_.classList.contains("open-list")?_.classList.remove("open-list"):_.classList.add("open-list")},fe=e=>{"initial"===e.style.display?e.style.display="none":e.style.display="initial"},we=e=>{e.removeAttribute("disabled"),e.parentElement.classList.remove("disable"),e.parentElement.classList.remove("tooltip")},Pe=e=>{e.setAttribute("disabled",""),e.parentElement.classList.add("disable"),e.parentElement.classList.add("tooltip"),Se(e)},xe=e=>{e.parentElement.nextElementSibling.style.display="initial"},Se=e=>{e.parentElement.nextElementSibling.style.display="none"},Le=(B.addEventListener("change",(()=>{F.visible=B.checked,fe(U),Ae()})),V.addEventListener("change",(()=>{D.visible=V.checked,A.visible=V.checked,fe(z)})),K.addEventListener("change",(()=>{R.visible=K.checked,fe(Q),"none"!==Z.style.display&&(X.checked=!1,q.visible=!1,fe(Z)),"none"!==te.style.display&&(ee.checked=!1,$.visible=!1,fe(te)),"none"!==ie.style.display&&(re.checked=!1,M.visible=!1,N.visible=!1,fe(ie))})),Y.addEventListener("change",(()=>{k.visible=Y.checked,fe(J)})),X.addEventListener("change",(e=>{q.visible=X.checked,fe(Z),"none"!==te.style.display&&(ee.checked=!1,$.visible=!1,fe(te)),"none"!==Q.style.display&&(K.checked=!1,R.visible=!1,fe(Q)),"none"!==ie.style.display&&(re.checked=!1,M.visible=!1,N.visible=!1,fe(ie)),!0===Z.visible?Z.parentElement.style.marginBottom=null:Z.parentElement.style.marginBottom=0})),ee.addEventListener("change",(()=>{$.visible=ee.checked,fe(te),"none"!==Z.style.display&&(X.checked=!1,q.visible=!1,fe(Z)),"none"!==Q.style.display&&(K.checked=!1,R.visible=!1,fe(Q)),"none"!==ie.style.display&&(re.checked=!1,M.visible=!1,N.visible=!1,fe(ie))})),re.addEventListener("change",(()=>{M.visible=re.checked,N.visible=re.checked,fe(ie),"none"!==Z.style.display&&(X.checked=!1,q.visible=!1,fe(Z)),"none"!==te.style.display&&(ee.checked=!1,$.visible=!1,fe(te)),"none"!==Q.style.display&&(K.checked=!1,R.visible=!1,fe(Q))})),ne.addEventListener("change",(()=>{G.visible=ne.checked,fe(ae)})),()=>{W.style.display="none",j.classList.remove("blue-background"),ve(),be()}),Te=()=>window.screen.width<=820?oe.goTo({zoom:6,center:[255,39],spatialReference:{wkid:102100}},{duration:1e3}):oe.goTo({zoom:5,center:[262,40],spatialReference:{wkid:102100}},{duration:1e3}),Ie=async({newDefaultLocation:e})=>{const t=e.split(","),r={x:t[0],y:t[1]},i=new c(r);if(t[3]&&"loc"===t[3])Ve({mapPoint:i}),at({mapPoint:i}),nt({mapPoint:i}),Ce({mapPoint:i});else if(t[3]&&t[3].length>=35){const e=t[3];Qe({irwinID:e})}else await De({mapPoint:i}),setTimeout((()=>{"12"!==t[2]&&(oe.zoom=t[2])}),1e3)},Ee=new s({symbol:{type:"simple-fill",color:[0,0,0,0],outline:new o({color:[255,186,31,1],style:"long-dash",width:2})}}),Ce=async({mapPoint:e,fireLocation:t})=>{const r=new p({center:e||t,geodesic:!0,numberOfPoints:200,radius:2,radiusUnit:"miles"});Ee.symbol.outline.style=oe.zoom<=8?"solid":"long-dash",Ee.geometry=r,oe.graphics.add(Ee)},He=async()=>{oe.graphics.removeAll()},Oe=async({fireIconGraphicInfo:e,fireInformation:t})=>{const r=t?t[0].split(","):e.geometry,i=t?t[3].split(" ")[0]:e.attributes.TotalIncidentPersonnel;await Fe();const n=new s({geometry:{type:"point",x:r.x||+r[0],y:r.y||+r[1]},symbol:{type:"simple-marker",size:17,color:[17,54,81,1],outline:{width:2,color:[255,186,31]}}});parseInt(i)>500?n.symbol.size=33:parseInt(i)<500?n.symbol.size=30:parseInt(i)<50&&(n.symbol.size=17),se.layers.reorder(le,11),le.graphics.push(n)},Fe=async()=>{le.graphics&&le.graphics.pop()},Ae=()=>{le.graphics.items[0].visible=F.visible},De=async({mapPoint:e})=>{if(oe.zoom>10)return;oe.goTo({target:e,zoom:12},{duration:1e3,animate:!0}).catch((e=>{console.error(e)}))},Re=()=>{E[0].style.marginTop="39px"},ke=e=>{if(!e.length)return void(x.innerHTML="");const t=e.map((e=>{if("object"==typeof e){const t={fireName:e[0]?e[0].attributes.IncidentName.toUpperCase():e.attributes.IncidentName.toUpperCase(),fireId:e[0]?e[0].attributes.IrwinID:e.attributes.IrwinID,fireAcres:e[0]?`${e[0].attributes.DailyAcres.toLocaleString()} acres`:`${e.attributes.DailyAcres.toLocaleString()} acres`,firePersonnel:e[0]?e[0].attributes.TotalIncidentPersonnel:e.attributes.TotalIncidentPersonnel,fireLocation:e[0]?[e[0].geometry.x,e[0].geometry.y]:[e.geometry.x,e.geometry.y],fireType:e[0]?e[0].attributes.IncidentTypeCategory:e.attributes.IncidentTypeCategory};return`\n      <div class = "fire-item padding-left-2" style = "margin-bottom: 15px; cursor: pointer;" value="${t.fireLocation}, ${t.fireId}, ${t.fireType}, ${t.firePersonnel}" > \n        <h5 style ="font-weight: bold; margin-bottom: -4px; color: #ffb600; line-height: 21px;" value="${t.fireLocation}, ${t.fireId}, ${t.fireType}, ${t.firePersonnel}">${t.fireName} </h5>\n        \n        <p value="${t.fireLocation}, ${t.fireId}, ${t.fireType}, ${t.firePersonnel}">${O[0].classList.contains("underline")?t.firePersonnel:t.fireAcres}</p>\n        \n      </div>\n      `}return`<p class = "trailer-0 fire-list-date" style = "margin-top: 1rem; cursor: default;">${e.toUpperCase()}</p>`}));x.innerHTML=[...t].join(""),t[0].includes("h5")&&Re(),Ke()};d.when((()=>oe?.stationary),(()=>{let e=oe.extent;ze({extentGeometry:e})})),d.when((()=>"ready"!==pe.viewModel.state),(()=>{document.querySelector(".closeBtn").classList.remove("invisible")})),d.when((()=>"ready"===pe.viewModel.state),(()=>{document.querySelector(".closeBtn")&&document.querySelector(".closeBtn").classList.add("invisible")})),d.watch((()=>oe?.zoom),(async()=>{if(oe.zoom>=0&&oe.zoom<=11?(X.attributes.disabled||ee.attributes.disabled)&&(we(X),we(ee),!0===X.checked?(q.visible=X.checked,xe(X)):X.visible=!1,!0===ee.checked?($.visible=ee.checked,xe(ee)):$.visible=!1):(Pe(X),Pe(ee),q.visible=!1,$.visible=!1,"intitial"!==Z.style.display&&"intitial"!==te.style.display||fe(Z||te)),oe.zoom>=0&&oe.zoom<=11?(we(K),!0===K.checked&&(xe(K),R.visible=!0)):(Pe(K),R.visible=!1,K.checked),oe.zoom<=6?(Pe(Y),k.visible=!1,Y.checked=!1,J.style.display="none"):(we(Y),k.visible=!0,Y.checked=!0,J.style.display="initial"),oe.zoom>=0&&oe.zoom<=11?(we(re),!0===re.checked&&(xe(re),M.visible=!0,N.visible=!0)):(Pe(re),M.visible=!1,N.visible=!1),oe.zoom>=12&&oe.zoom<=15?(we(ne),!0===ne.checked&&(xe(ne),G.visible=!0)):(Pe(ne),G.visible=!1),oe.zoom<=9&&oe.graphics.items.length>0&&le.graphics.items.length>0){const e=Ee.clone();e.symbol.outline.style="solid",await He(),oe.graphics.add(e),oe.graphics.items[0].visible=!1}else if(oe.zoom>=10&&oe.graphics.items.length>0&&le.graphics.items.length>0){const e=Ee.clone();e.symbol.outline.style="long-dash",await He(),oe.graphics.add(e),oe.graphics.items[0].symbol.outline.style="long-dash",oe.graphics.items[0].visible=!0}else if(oe.zoom<=8&&oe.graphics.items.length>0&&0===le.graphics.items.length){const e=Ee.clone();e.symbol.outline.style="solid",await He(),oe.graphics.add(e)}else if(oe.zoom>=9&&oe.graphics.items.length>0&&0===le.graphics.items.length){const e=Ee.clone();e.symbol.outline.style="long-dash",await He(),oe.graphics.add(e)}}));const Me=()=>{window.screen.width>800&&b.style.height&&(b.style.height=null)};window.addEventListener("load",Me,!1),window.addEventListener("resize",Me,!1);const Ne=()=>{document.querySelector(".closeBtn svg").addEventListener("click",(e=>{pe.viewModel.clear(),document.querySelector(".closeBtn").classList.add("invisible")}))};oe.on("click",(async e=>{if(pe.active)return;const t=JSON.stringify(e.mapPoint);!1!==await Ue({mapPoint:t})&&(await He(),await Fe(),qe(e),window.screen.width<=800&&(b.style.height="100%"),f.style.transform="rotate(180deg)")}));const qe=e=>{let t;oe.hitTest(e,{include:[F,A,D]}).then((r=>{if(r.results.length){t=r.results.filter((e=>e.graphic))[0].graphic;const e=t.attributes;t.sourceLayer.title.includes("Current Incidents"),Qe({hitTestResponse:e})}else{T[0].innerHTML="",I[0].innerHTML="";const t=e.mapPoint;Ve({mapPoint:t}),at({mapPoint:t}),nt({mapPoint:t}),Ce({mapPoint:t}),$e({mapPoint:t})}}))},$e=({mapPoint:e,irwinIdNumber:t})=>(v.hash=`@=${e.longitude.toFixed(3)},${e.latitude.toFixed(3)},${oe.zoom<=8?12:oe.zoom},${t||"loc"}`,window.location.href=v.hash.toString());S.addEventListener("click",(async()=>{Ge(),await He(),await Fe(),ge(),_e(),P.style.display="none"}));const Ge=e=>{"initial"===x.style.display||e&&x.style.display?(x.style.display="none",S.style.display="initial",P.style.display="initial",We(),L.style.display="none"):(x.style.display="initial",S.style.display="none",P.style.display="none",L.style.display="initial",We())},We=(document.querySelector("#return-top-Btn").addEventListener("click",(()=>{We()})),()=>{document.querySelector("#infoBar").scrollTo(0,0)}),je=(f.addEventListener("click",(e=>{e.preventDefault(),"100%"===b.style.height?(b.style.height="0",f.style.transform="rotate(0deg)"):(b.style.height="100%",f.style.transform="rotate(180deg)")})),({personnelSorted:e,dateSorted:t,nameSorted:r,acreSorted:i})=>{O.forEach((n=>{n.addEventListener("click",(n=>{!n.target.classList.contains("underline")&&(O.forEach((e=>{e.classList.remove("underline")})),n.target.classList.add("underline")),n.target.innerText.includes("PERSONNEL")?ke(e):n.target.innerText.includes("DATE")?ke(t):n.target.innerText.includes("NAME")?ke(r):n.target.innerText.includes("SIZE")&&ke(i)}))}))}),_e=()=>{O.forEach((e=>{e.classList.remove("underline")})),document.querySelector("#fire-personnel").classList.add("underline"),ke(H),Re()},Be=e=>{const t=`<span style="font-size: 24px; font-weight: bold; color: #FFBA1F; margin-right: 5px;"> ${e} </span> <span style="font-size: 20px;">FIRES IN VIEW</span>`;document.getElementById("firesInView").innerHTML=t},Ue=async({mapPoint:e})=>new Promise((t=>{const r={where:"1=1",geometry:e,geometryType:"esriGeometryPoint",inSR:4326,spatialRelationship:"intersects",distance:2,units:"esriSRUnit_StatuteMile",outSR:3857,f:"json"};axios.get("https://services.arcgis.com/jIL9msH9OI208GCb/ArcGIS/rest/services/AllHexesFromAgolAsPoints220811a/FeatureServer/22/query",{params:r}).then((e=>{e.data.fields?t(!0):t(!1)}))})),Ve=({mapPoint:e})=>{e?Ge(e):Ge(),De({mapPoint:e}),Xe({mapPoint:e}),Ze({mapPoint:e}),gt()},ze=({extentGeometry:e})=>{const t={where:"1=1",geometry:JSON.stringify(e),geometryType:"esriGeometryEnvelope",spatialRelationship:"intersects",inSR:3857,returnGeometry:!0,returnQueryGeometry:!0,outFields:["IrwinID","IncidentName","POOState","ModifiedOnDateTime","FireDiscoveryDateTime","FireDiscoveryAge","IncidentTypeCategory","CalculatedAcres","DailyAcres","DiscoveryAcres","PercentContained","TotalIncidentPersonnel"].join(","),f:"json"};axios.get("https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/USA_Wildfires_v1/FeatureServer/0/query",{params:t}).then((e=>{const t=e.data.features;let r=t.map((e=>({fire:e,monthDay:new Date(e.attributes.FireDiscoveryDateTime).toLocaleString("default",{month:"long",day:"numeric"}),sortDate:e.attributes.FireDiscoveryDateTime})));r=r.sort(((e,t)=>t.sortDate-e.sortDate));let i={};r.forEach((e=>{i[e.monthDay]||(i[e.monthDay]=[]),i[e.monthDay].push(e)}));let n=[];Object.keys(i).forEach((e=>{let t=`${e}`;n.push(t),i[e].forEach((e=>{e.fire.attributes.DailyAcres=e.fire.attributes.DailyAcres?+e.fire.attributes.DailyAcres:e.fire.attributes.DiscoveryAcres?e.fire.attributes.DiscoveryAcres:"Unreported",n.push([e.fire])}))})),(({dateSorted:e,wildFires:t})=>{const r=t;C.push(e);let i=[];[...i]=t.map((e=>Object.assign(e,{acreSorting:+e.attributes.DailyAcres?e.attributes.DailyAcres:0})));let n=[...r];n=n.sort(((e,t)=>e.attributes.IncidentName.trim().localeCompare(t.attributes.IncidentName.trim())));let a=[...r];if(a=i.sort(((e,t)=>t.acreSorting-e.acreSorting)),H=[...r],H=r.sort(((e,t)=>t.attributes.TotalIncidentPersonnel-e.attributes.TotalIncidentPersonnel)),H.map((e=>{e.attributes.TotalIncidentPersonnel=e.attributes.TotalIncidentPersonnel?`${e.attributes.TotalIncidentPersonnel.toLocaleString()} personnel`:"Not reported"})),!e.length||!t.length)return ke(0),Be(0),void je({personnelSorted:H,dateSorted:e,nameSorted:n,acreSorted:a});O.forEach((t=>{t.innerText.includes("PERSONNEL")&&t.classList.contains("underline")?ke(H):t.innerText.includes("DATE")&&t.classList.contains("underline")?ke(e):t.innerText.includes("NAME")&&t.classList.contains("underline")?ke(n):t.innerText.includes("SIZE")&&t.classList.contains("underline")&&ke(a)})),je({personnelSorted:H,dateSorted:e,nameSorted:n,acreSorted:a})})({dateSorted:n,wildFires:t}),Be(e.data.features.length)})).catch((e=>{console.error(`query Error: ${e}`),Be(0)}))},Ke=()=>{document.querySelectorAll(".fire-item").forEach((e=>{e.addEventListener("mouseenter",(e=>{const t=e.target.attributes.value.value.split(", ");Oe({fireInformation:t})})),e.addEventListener("mouseleave",Fe),e.addEventListener("click",(t=>{e.removeEventListener("mouseleave",Fe);const r=t.target.attributes.value.value.split(", ")[1];Qe({irwinID:r})}))}))},Qe=({hitTestResponse:e,irwinID:t})=>{const r=e?e.IrwinID||e.IRWINID.replace(/[{}]/g,""):t,i={where:`IrwinId ='${r}'`,time:null,outFields:["IrwinID","IncidentName","POOState","POOCounty","ModifiedOnDateTime","FireDiscoveryDateTime","FireDiscoveryAge ","IncidentTypeCategory","DailyAcres","TotalIncidentPersonnel","PercentContained"].join(","),returnGeometry:!0,outSR:4326,f:"json"};axios.get("https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/USA_Wildfires_v1/FeatureServer/0/query",{params:i}).then((t=>{const i=t.data.features[0],n="WF"!==t.data.features[0].attributes.IncidentTypeCategory?"RX"!==t.data.features[0].attributes.IncidentTypeCategory?"INCIDENT COMPLEX":"PERSCRIPTION BURN":"WILDFIRE",a=new c({x:t.data.features[0].geometry.x.toFixed(3),y:t.data.features[0].geometry.y.toFixed(3)});(({fireData:e})=>{const t=new Date(e.modifiedOnDateTime).toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}),r=new Date(e.fireDiscoveryDateTime).toLocaleDateString(void 0,{hour:"numeric",minute:"numeric",month:"long",day:"numeric",year:"numeric"}),i=e.fireDiscovery,n=e.incidentName.toUpperCase(),a=e.county.toUpperCase(),s=e.state.substring(3),o=e.dailyAcres,l=e.personnelAssigned.toLocaleString(),d=e.incidentType;T[0].innerHTML=`\n                          <p class = "trailer-0 sectionHeader">FIRE INFORMATION</p>\n                          <p class="sectionSubHeader">Current as of:  ${t.toUpperCase()} </p>`,I[0].setAttribute("style","display: inline"),I[0].innerHTML=`\n          <div style="display: inline-flex; margin-top: -5px;">\n              <img src= ${e.personnelAssigned&&"PRESCRIBED FIRE"===d?"https://www.arcgis.com/sharing/rest/content/items/4078350792ea4da2b36cab7351909fd7/data":"number"==typeof e.personnelAssigned?"https://esri.maps.arcgis.com/sharing/rest/content/items/b56beb3d45d14b63af0113901dd767f7/data":"string"==typeof e.personnelAssigned?"https://www.arcgis.com/sharing/rest/content/items/6f3a489a81a54494a1b57cb577e92fcb/data":void 0} \n                style="width:64px; height:64px;" \n                viewbox="0 0 32 32" \n                class="svg-icon" \n                type="image/svg+xml"/>\n              <div>\n                <h4 class = "bold trailer-0" style= "line-height: 0px;"><b>${n}</b></h4>\n                <p class = "trailer-0" style = "font-size: 0.875rem;" >${a} COUNTY, ${s}</p>\n                <p class = "trailer-0" style = "font-size: 0.875rem;" >INCIDENT TYPE: ${d}</p>\n                <p class = "trailer-0" style = "font-size: 0.875rem; white-space:nowrap" >START: ${r.toUpperCase()}</p>\n              </div>\n          </div>\n          \n          <div>\n            <div class = "trailer-0 " style= "margin-top: 10px;"> \n              <span style = "vertical-align: 2px; margin: 0 5px 0px 103px"> DAY </span> <h4 class = "bold trailer-0" style = "white-space: nowrap;"> ${window.screen.width>700||i>0?i:"< 24 hours"}</h4>\n            </div>\n            <div class = "trailer-0 " style= "margin-top: 10px;"> \n              <span style = "vertical-align: 2px; margin: 0 5px 0px 45px;"> PERSONNEL </span> <h4 class = "bold trailer-0" style = "white-space: nowrap;"> ${l}</h4>\n            </div>\n            <div class = "trailer-0" style = "margin: 5px auto;">\n              <span style = "vertical-align: text-bottom; margin: 0 5px 0px 5px"> REPORTED ACRES </span> <h4 class = "bold trailer-0"> ${o?o.toLocaleString():"Not reported"}</h4>\n            </div>\n          </div>\n          <div id = 'containment' style = 'display:inline-flex'>\n            <p class = "trailer-0" style="margin-top: 5px;">\n              <span style = "vertical-align: text-bottom; margin: 0 5px 0 23px;">CONTAINMENT</span>\n              <span id = "containment-text"></span>\n            </p>\n            </div>\n          `,lt(e.percentContained)})({fireData:t.data.features[0]?{irwinId:t.data.features[0].attributes.IrwinID,state:t.data.features[0].attributes.POOState,county:t.data.features[0].attributes.POOCounty,incidentName:t.data.features[0].attributes.IncidentName,fireDiscovery:0===t.data.features[0].attributes.FireDiscoveryAge?"Less than 24 hours":t.data.features[0].attributes.FireDiscoveryAge,fireDiscoveryDateTime:t.data.features[0].attributes.FireDiscoveryDateTime,modifiedOnDateTime:t.data.features[0].attributes.ModifiedOnDateTime,incidentType:n,dailyAcres:null===t.data.features[0].attributes.DailyAcres?"Not reported":t.data.features[0].attributes.DailyAcres,personnelAssigned:t.data.features[0].attributes.TotalIncidentPersonnel?t.data.features[0].attributes.TotalIncidentPersonnel:"Not reported",percentContained:null===t.data.features[0].attributes.PercentContained?"Not reported":t.data.features[0].attributes.PercentContained}:{irwinId:e.IrwinID,incidentName:e.IncidentName,fireDiscovery:e.CurrentDateAge,fireDiscoveryDateTime:e.CreateDate,modifiedOnDateTime:e.DateCurrent,incidentType:e.incidentType,personnelAssigned:null===DailyAcres?"Not reported":t.data.features[0].attributes.TotalIncidentPersonnel,percentContained:"Not reported"}}),Ve({mapPoint:a}),Ye({irwinIdNumber:r,mapPoint:a}),Oe({fireIconGraphicInfo:i}),$e({mapPoint:a,irwinIdNumber:r})})).catch((e=>{console.log(e)}))},Ye=async({irwinIdNumber:e,mapPoint:t})=>{const r={where:`irwinID = '{${e}}'`,inSR:3857,outFields:"*",f:"json"};axios.get(g,{params:r}).then((r=>{const i=!!r.data.fields&&r.data.features[0].attributes;if(i){const e=[{data:i.sum_estimated0_14pop?i.sum_estimated0_14pop:0,name:"< 14"},{data:i.sum_estimated15_17pop?i.sum_estimated15_17pop:0,name:"15-17"},{data:i.sum_estimated18to64pop?i.sum_estimated18to64pop:0,name:"18-64"},{data:i.sum_estimated65_79pop?i.sum_estimated65_79pop:0,name:"65-79"},{data:i.sum_estimated80pluspop?i.sum_estimated80pluspop:0,name:"+ 80"}],t=i.sum_estimated80pluspop+i.sum_estimated65_79pop+i.sum_estimated18to64pop+i.sum_estimated15_17pop+i.sum_estimated0_14pop,r={value:parseFloat(100-i.sum_estpopwith0vehicles/i.sum_p0010001*100).toFixed(1)},n={value:parseFloat(100-i.sum_estpopnoenglish/i.sum_p0010001*100).toFixed(1)},a=i.sum_MedHomeValueWeighted,s={TotalHousingUnits:i.sum_h0010001?i.sum_h0010001.toLocaleString():null,MedianValue:i.sum_MedHomeValueWeighted?`$${a.toLocaleString()}`:null},o={totalPopulation:t?t.toLocaleString():0,percentofPopulationInPoverty:i.sum_estpopinpoverty=i.sum_estpopinpoverty?`${parseFloat(i.sum_estpopinpoverty/t*100).toFixed(0)}%`:"0%",percentofPopulationWithDisability:i.sum_estpopwithdisability=i.sum_estpopwithdisability?`${parseFloat(i.sum_estpopwithdisability/t*100).toFixed(0)}%`:"0%"},l={PctBarren:i.PctBarren,PctCropland:i.PctCropland,PctDevelop:i.PctDevelop,PctForest:i.PctForest,PctGrass:i.PctGrass,PctShrub:i.PctShrub,PctSnowIce:i.PctSnowIce,PctWater:i.PctWater,PctWetlands:i.PctWetlands};i.CritHab=[...new Set(i.CritHab.split(", "))].join(", "),i.OwnersPadus&&(i.OwnersPadus=i.OwnersPadus.split(", ").filter((e=>!e.includes(void 0)&&!1==!e)).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),i.OwnersPadus[Object.keys(i.OwnersPadus)[0]]?i.OwnersPadus=Object.keys(i.OwnersPadus).join(", ").split(", "):i.OwnersPadus=null;try{i.ForestTypeGroup=i.ForestTypeGroup.replace(/'/g,'"');const e=JSON.parse(i.ForestTypeGroup);i.ForestTypeGroup=e,i.ForestTypeGroup=e[Object.keys(e)[0]]?i.ForestTypeGroup=Object.keys(e):i.ForestTypeGroup=null}catch(e){console.log(e)}const d={Hex_Count:i.Hex_Count,L3EcoReg:i.L3EcoReg?i.L3EcoReg:"No information",LandForm:i.LandForm?i.LandForm:"No information",RichClass:i.RichClass?i.RichClass:null,CritHab:i.CritHab?i.CritHab:null,OwnersPadus:i.OwnersPadus?i.OwnersPadus:null,ForestTypeGroup:i.ForestTypeGroup?i.ForestTypeGroup:null,SumCarbon:i.SumCarbon?Math.round(i.SumCarbon):null};try{i.WHPClass=i.WHPClass.replace(/'/g,'"');const e=JSON.parse(i.WHPClass);e["Very High"]=e["Very High"]/i.Hex_Count||0,e.High=e.High/i.Hex_Count||0,e.Moderate=e.Moderate/i.Hex_Count||0,e.Low=e.Low/i.Hex_Count||0,e["Very Low"]=e["Very Low"]/i.Hex_Count||0,mt({consolidatedWHPClass:e})}catch(e){console.error(e)}dt(e),ct(n),pt(r),bt({perimeterPopulation:o}),ft({perimeterHousingData:s}),st({perimeterLandCover:l}),wt({perimeterEcology:d})}else Je({irwinIdNumber:e,mapPoint:t})}))},Je=({irwinIdNumber:e,mapPoint:t})=>{Ce({mapPoint:t}),at({mapPoint:t}),nt({mapPoint:t})},Xe=({mapPoint:e,fireInformation:t})=>{const r={where:"1=1",geometry:t?`${t[0]}`:`${e.longitude}, ${e.latitude}`,geometryType:"esriGeometryPoint",inSR:4326,spatialRelationship:"intersects",outFields:"dm",returnQueryGeometry:!0,f:"json"};axios.get("https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/US_Drought_Intensity_v1/FeatureServer/3/query",{params:r}).then((e=>{const t=e.data.features[0]?e.data.features[0].attributes.dm:"Drought conditions not reported";yt((e=>0===e?"Abnormally dry":1===e?"Moderate":2===e?"Severe":3===e?"Extreme":4===e?"Exceptional":"Not present"===e?"None present":void 0)(t))}))},Ze=async({mapPoint:e,fireInformation:t})=>{const r=await et({mapPoint:e,fireInformation:t}),i=await tt({mapPoint:e,fireInformation:t}),n=await rt({mapPoint:e,fireInformation:t}),a=await it({mapPoint:e,fireInformation:t});ht({temp:r,wind:i,airQualityToday:n,airQualityTomorrow:a})},et=async({mapPoint:e,fireInformation:t})=>new Promise((r=>{const i={where:"1=1",geometry:t?`${t[0]}`:`${e.longitude}, ${e.latitude}`,geometryType:"esriGeometryPoint",inSR:4326,spatialRelationship:"intersects",outFields:["period","temp"].join(","),returnQueryGeometry:!0,f:"json"};axios.get("https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/NDFD_DailyTemperature_v1/FeatureServer/1/query",{params:i}).then((e=>{if(e.data.fields){const t=e.data.features.sort(((e,t)=>{e.attributes.Period,t.attributes.Period})),i={todayF:`${t[2].attributes.Temp}&deg F`,tomorrowF:`${t[1].attributes.Temp}&deg F`,todayC:`${Math.round(5*(t[0].attributes.Temp-32)/9)}&deg C`,tomorrowC:`${Math.round(5*(t[1].attributes.Temp-32)/9)}&deg C`,renderWeather:!0};r(i)}else{r({todayF:"No data",tomorrowF:"No data",todayC:"No data",tomorrowC:"No data",renderWeather:!1})}})).catch((e=>{console.error(e)}))})),tt=async({mapPoint:e,fireInformation:t})=>new Promise((r=>{const i={where:"1=1",geometry:t?`${t[0]}`:JSON.stringify(e),geometryType:"esriGeometryPoint",inSR:4326,outFields:["fromdate","todate","force","label"].join(","),returnQueryGeometry:!0,f:"json"};axios.get("https://services9.arcgis.com/RHVPKKiFTONKtxq3/ArcGIS/rest/services/NDFD_WindSpeed_v1/FeatureServer/0/query",{params:i}).then((e=>{const t=e.data.features.length?e.data.features.sort(((e,t)=>e.attributes.fromdate-t.attributes.fromdate)):null,i=[{mph:"< 1mph",kph:"< 1km/h"},{mph:"1-3 mph",kph:"1-5 km/h"},{mph:"4-7 mph",kph:"6-11 km/h"},{mph:"8-12 mph",kph:"12-19 km/h"},{mph:"13-17 mph",kph:"20-28 km/h"},{mph:"18-24 mph",kph:"29-38 km/h"},{mph:"25-30 mph",kph:"39-49 km/h"},{mph:"31-38 mph",kph:"50-61 km/h"},{mph:"39-46 mph",kph:"62-74 km/h"},{mph:"47-54 mph",kph:"75-88 km/h"},{mph:"55-63 mph",kph:"89-102 km/h"},{mph:"64-72 mph",kph:"103-117 km/h"},{mph:"72-82 mph",kph:"118-132 km/h"},{mph:"83-92 mph",kph:"133-148 km/h"},{mph:"93-103 mph",kph:"149-165 km/h"},{mph:"104-114 mph",kph:"166-183 km/h"},{mph:"115-125 mph",kph:"184-200 km/h"},{mph:"No data",kph:"No data"}],n=t?{today:i[t[0].attributes.force],tomorrow:i[t[8].attributes.force]}:{today:i[17],tomorrow:i[17]};r(n)})).catch((e=>{console.error(e)}))})),rt=({mapPoint:e,fireInformation:t})=>new Promise((r=>{const i={where:"1=1",geometry:t?`${t[0]}`:JSON.stringify(e),geometryType:"esriGeometryPoint",inSR:4326,outFields:"gridcode",returnQueryGeometry:!0,f:"json"};axios.get("https://services.arcgis.com/cJ9YHowT8TU7DUyn/ArcGIS/rest/services/AirNowAQIForecast/FeatureServer/0/query",{params:i}).then((e=>{const t=e.data.features[0]?e.data.features[0].attributes.gridcode:"No data";r((e=>1===e?"Good":2===e?"Moderate":3===e?"Unhealthy for sensitive groups":4===e?"Unhealthy":5===e?"Very unhealthy":6===e?"Hazardous":"No data")(t))})).catch((e=>{console.error(e)}))})),it=({mapPoint:e,fireInformation:t})=>new Promise((r=>{const i={where:"1=1",geometry:t?`${t[0]}`:JSON.stringify(e),geometryType:"esriGeometryPoint",inSR:4326,outFields:"gridcode",returnQueryGeometry:!0,f:"json"};axios.get("https://services.arcgis.com/cJ9YHowT8TU7DUyn/ArcGIS/rest/services/AirNowAQIForecast/FeatureServer/1/query",{params:i}).then((e=>{const t=e.data.features[0]?e.data.features[0].attributes.gridcode:"No data";r((e=>1===e?"Good":2===e?"Moderate":3===e?"Unhealthy for sensitive groups":4===e?"Unhealthy":5===e?"Very unhealthy":6===e?"Hazardous":"No data")(t))})).catch((e=>{console.error(e)}))})),nt=({mapPoint:e,fireInformation:t})=>{const r={where:"1=1",geometry:t?`${t[0]}`:JSON.stringify(e),geometryType:"esriGeometryPoint",spatialRelationship:"intersects",distance:2,units:"esriSRUnit_StatuteMile",inSR:4326,outFields:["P0010001","Estimated0_14Pop","Estimated15_17Pop","Estimated18to64Pop","Estimated65_79Pop","Estimated80PlusPop","EstPopWithDisability","EstPopinPoverty","EstPopNoEnglish","EstPopWith0Vehicles","H0010001","MedHomeValueWeighted"].join(","),returnGeometry:!0,returnQueryGeometry:!0,f:"json"};axios.get(h,{params:r}).then((e=>{if(e.data.features){const t=e.data.features.reduce(((e,t)=>(Object.keys(t.attributes).forEach((r=>{e[r]=(e[r]||0)+t.attributes[r]})),e)),{}),r=[{data:t.Estimated0_14Pop,name:"< 14"},{data:t.Estimated15_17Pop,name:"15-17"},{data:t.Estimated18to64Pop,name:"18-64"},{data:t.Estimated65_79Pop,name:"65-79"},{data:t.Estimated80PlusPop,name:"+ 80"}],i=t.Estimated80PlusPop+t.Estimated65_79Pop+t.Estimated18to64Pop+t.Estimated15_17Pop+t.Estimated0_14Pop,n={value:parseFloat(100-t.EstPopNoEnglish/i*100).toFixed(1)},a={value:parseFloat(100-t.EstPopWith0Vehicles/i*100).toFixed(1)},s=Math.round(t.MedHomeValueWeighted/t.H0010001),o={TotalHousingUnits:t.H0010001?t.H0010001.toLocaleString():null,MedianValue:t.MedHomeValueWeighted?`$${s.toLocaleString()}`:null},l={totalPopulation:i?i.toLocaleString():0,percentofPopulationInPoverty:t.EstPopinPoverty?`${parseFloat(t.EstPopinPoverty/i*100).toFixed(0)}%`:"0%",percentofPopulationWithDisability:t.EstPopWithDisability?`${parseFloat(t.EstPopWithDisability/i*100).toFixed(0)}%`:"0%"};dt(r),ct(n),pt(a),bt({totalRadiusPopulation:l}),ft({radiusHousingData:o})}else{}}))},at=({mapPoint:e,fireInformation:t})=>{const r={where:"1=1",geometry:t?`${t[0]}`:JSON.stringify(e),geometryType:"esriGeometryPoint",inSR:4326,spatialRelationship:"intersects",distance:2,units:"esriSRUnit_StatuteMile",outFields:["L3EcoReg","LandForm","CritHab","OwnersPadus","RichClass","WHPClass","PctWater","PctSnowIce","PctDevelop","PctBarren","PctForest","PctShrub","PctGrass","PctCropland","PctWetlands","SumCarbon","ForestTypeGroup"].join(","),returnGeometry:!0,returnQueryGeometry:!0,outSR:3857,f:"json"};axios.get("https://services.arcgis.com/jIL9msH9OI208GCb/ArcGIS/rest/services/AllHexesFromAgolAsPoints220823a/FeatureServer/0/query",{params:r}).then((e=>{const t=e.data.features;if(e.data.fields){const e=t.reduce(((e,t)=>(Object.keys(t.attributes).forEach((r=>{"string"!=typeof t.attributes[r]&&"object"!=typeof t.attributes[r]||(e[r]=e[r]+", "||""+t.attributes[r]),e[r]=(e[r]||0)+t.attributes[r]})),e)),{});e.CritHab&&(e.CritHab=e.CritHab.split(", ").filter((e=>!e.includes(void 0)&&!1==!e)).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),e.CritHab[Object.keys(e.CritHab)]?e.CritHab=Object.keys(e.CritHab).join(", "):e.CritHab=null,e.L3EcoReg&&(e.L3EcoReg=e.L3EcoReg.split(", ").filter((e=>!e.includes(void 0))).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),e.L3EcoReg[Object.keys(e.L3EcoReg)[0]]?e.L3EcoReg=Object.entries(e.L3EcoReg).sort(((e,t)=>t[0].localeCompare(e[0]))).sort(((e,t)=>t[1]-e[1]))[0][0]:e.L3EcoReg=null,e.LandForm&&(e.LandForm=e.LandForm.split(", ").filter((e=>!e.includes(void 0))).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),e.LandForm[Object.keys(e.LandForm)[0]]?e.LandForm=Object.entries(e.LandForm).sort(((e,t)=>t[0].localeCompare(e[0]))).sort(((e,t)=>t[1]-e[1]))[0][0]:e.LandForm=null,e.ForestTypeGroup&&(e.ForestTypeGroup=e.ForestTypeGroup.split(",").filter((e=>!e.includes(void 0)&&!e.includes(null))).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),e.ForestTypeGroup[Object.keys(e.ForestTypeGroup)[0]]?e.ForestTypeGroup=Object.entries(e.ForestTypeGroup).sort(((e,t)=>t[0].localeCompare(e[0]))).sort(((e,t)=>t[1]-e[1])).map((e=>e[0])):e.ForestTypeGroup=null,e.OwnersPadus&&(e.OwnersPadus=e.OwnersPadus.split(", ").filter((e=>!e.includes(void 0)&&!1==!e)).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),e.OwnersPadus[Object.keys(e.OwnersPadus)[0]]?e.OwnersPadus=Object.keys(e.OwnersPadus).join(", ").split(", "):e.OwnersPadus=null,e.RichClass&&(e.RichClass=e.RichClass.split(", ").filter((e=>!e.includes(void 0)&&!e.includes(null))).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),e.RichClass[Object.keys(e.RichClass)[0]]?e.RichClass=Object.entries(e.RichClass).sort(((e,t)=>t[0].localeCompare(e[0]))).sort(((e,t)=>t[1]-e[1]))[0][0]:e.RichClass=null,e.SumCarbon=null!==e.SumCarbon?Math.round(e.SumCarbon):0,e.WHPClass&&(e.WHPClass=e.WHPClass.split(", ").filter((e=>!e.includes(void 0))).reduce(((e,t)=>(e[t]?e[t]++:e[t]=1,e)),{})),e.PctBarren=e.PctBarren/t.length,e.PctCropland=e.PctCropland/t.length,e.PctDevelop=e.PctDevelop/t.length,e.PctForest=e.PctForest/t.length,e.PctGrass=e.PctGrass/t.length,e.PctShrub=e.PctShrub/t.length,e.PctSnowIce=e.PctSnowIce/t.length,e.PctWater=e.PctWater/t.length,e.PctWetlands=e.PctWetlands/t.length,e.WHPClass&&(e.WHPClass["Very High"]=e.WHPClass["Very High"]/t.length||0,e.WHPClass.High=e.WHPClass.High/t.length||0,e.WHPClass.Moderate=e.WHPClass.Moderate/t.length||0,e.WHPClass.Low=e.WHPClass.Low/t.length||0,e.WHPClass["Very Low"]=e.WHPClass["Very Low"]/t.length||0),e.Hex_Count=t.length,mt({aggregateEcoObj:e}),st({aggregateEcoObj:e}),wt({aggregateEcoObj:e})}else{const e={Hex_Count:null,CritHab:null,L3EcoReg:null,LandForm:null,OwnersPadus:null,RichClass:null,PctBarren:0,PctCropland:0,PctDevelop:0,PctForest:0,PctGrass:0,PctShrub:0,PctSnowIce:0,PctWater:0,PctWetlands:0,WHPClass:{"Very High":0,High:0,Moderate:0,Low:0,"Very Low":0}};wt({aggregateEcoObj:e}),st({aggregateEcoObj:e}),mt({aggregateEcoObj:e})}}))},st=({aggregateEcoObj:e,perimeterLandCover:t})=>{const r=[{name:"Forest",percent:e?e.PctForest:t.PctForest,fill:"#005948"},{name:"Barren",percent:e?e.PctBarren:t.PctBarren,fill:"#6E726B"},{name:"Cropland",percent:e?e.PctCropland:t.PctCropland,fill:"#D3AA5F"},{name:"Developed",percent:e?e.PctDevelop:t.PctDevelop,fill:"#993131"},{name:"Grassland",percent:e?e.PctGrass:t.PctGrass,fill:"#918652"},{name:"Scrubland",percent:e?e.PctShrub:t.PctShrub,fill:"#4F482A"},{name:"Snow / Ice",percent:e?e.PctSnowIce:t.PctSnowIce,fill:"#EDEDEB"},{name:"Water",percent:e?e.PctWater:t.PctWater,fill:"#054F8C"},{name:"Wetlands",percent:e?e.PctWetlands:t.PctWetlands,fill:"#028B9C"}];let i=0;r.map((e=>{e.percent=Math.round(e.percent),e.percent<10&&(i+=e.percent,e.percent=0)}));const n={name:"Other",percent:parseFloat(i.toFixed(0)),fill:"#D9C7AE"};r.push(n),ot(r)},ot=e=>{d3.select("#landcover-graph").remove();const t=e.filter((e=>e.percent));if(0===t.length)return;d3.scaleOrdinal().domain(t).range(["#005948","#6E726B","#D3AA5F","#993131","#918652","#4F482A","#EDEDEB","#028B9C","#054F8C","#D9C7AE"]),d3.select("#landcover-chart").append("div").attr("id","landcover-graph").append("div").style("position","relative").append("svg").attr("height",200).attr("width",320).style("display","block").style("margin","20px auto").attr("id","landcover-svg"),d3.select("#landcover-graph div").insert("div","svg").style("position","absolute").style("top","13%").style("left","28%").style("width","150px").style("height","150px").style("border-radius","50%").style("background-color","rgb(03, 34, 53)").style("z-index",-1);const r=d3.select("#landcover-svg"),i=r.attr("width"),n=r.attr("height"),a=Math.min(i,n)/2,s=r.append("g").attr("transform",`translate(${i/2}, ${n/2})`),o=r.append("g").attr("transform",`translate(${i/2}, ${n/2})`),l=d3.pie().value((e=>e.percent)),d=d3.arc().outerRadius(1*a).innerRadius(.7*a);s.selectAll("arc").data(l(t)).enter().append("path").attr("d",d).attr("fill",(e=>e.data.fill)).on("mouseover",((e,t,r)=>{o.append("text").attr("dy","1em").attr("text-anchor","middle").attr("class","percentage").text(`${t.value}%`),o.append("text").attr("text-anchor","middle").attr("class","landcover").text(`${t.data.name}`)})).on("mouseout",(()=>{o.select(".percentage").remove(),o.select(".landcover").remove()}))},lt=e=>{if(d3.select("#containment-bar").remove(),"Not reported"===e)document.getElementById("containment-text").innerHTML=`<h4 class = "bold trailer-0">${e}</h4>`;else{const t=[100.01,e],r=d3.scaleOrdinal().domain(t).range(["#032235","#FFBA1F"]),i=(d3.select("#containment").append("div").attr("id","svgContainer").attr("width",100).attr("height",100),185),n=d3.select("#svgContainer").append("svg").attr("class","bar").attr("id","containment-bar").style("margin","0px -14px 0").style("padding","6px 10px 0px").attr("width","100%").attr("height","85%").attr("viewBox","0 0 181 40").append("g").attr("transform","translate( 0, -1.5 )"),a=d3.scaleLinear().domain([0,d3.max(t)]).range([0,i-30]);n.selectAll("rect").data(t).enter().append("rect").attr("width",a).attr("height",20).attr("fill",(e=>r(e))).attr("dy","0.1"),n.append("text").attr("dy","2em").attr("dx","1.5em").attr("x",e*((i-35)/100)).attr("text-anchor","end").attr("fill","#ffb600").style("font-size","1.3rem").style("font-weight","bold").text(`${e}%`)}},dt=e=>{const t=e.reduce(((e,t)=>e+t.data),0),r=135;if(d3.select("#population-graph").remove(),document.querySelector("#population-graph-data-control").innerText="",!t)return void(document.querySelector("#population-graph-label").innerHTML="");d3.select("#population-breakdown").append("div","div").attr("id","population-graph").style("width","100%").style("height","100%").append("svg").attr("id","population-svg");const i=d3.select("#population-svg").attr("height","100%").attr("width","100%").attr("viewBox","0 -28 220 188").attr("preserveAspectRatio","xMidYMax").append("g").attr("transform","translate( 0, 0 )"),n=i.append("g"),a=d3.scaleBand().domain(e.map(((e,t)=>e.name))).range([0,220]).padding(.2),s=d3.scaleLinear().domain([0,d3.max(e,(e=>e.data))]).range([r,0]),o=d3.axisBottom(a);d3.axisLeft(s);n.call(o).attr("transform","translate(0, 135)"),i.selectAll(".bar").data(e).enter().append("rect").attr("class","rect-bar").attr("x",((e,t)=>a(e.name,t))).attr("y",(e=>0===e.data?s(.1):s(e.data))).attr("width",a.bandwidth()).attr("height",(e=>0===e.data?r-s(.1):r-s(e.data))).attr("fill","#0285a8").on("mouseover",((e,t)=>{i.append("text").attr("class","pop").attr("x",a(t.name)).attr("y",0===t.data?s(.1):s(t.data)).attr("dy","-0.5em").attr("dx",""+(t.data<10?"0.7em":"0.25em")).attr("transform",`translate(${t.data>999?-6:0}, 0)`).attr("fill","#ffb600").style("font-weight","bold").text(t.data.toLocaleString())})).on("mouseout",(()=>{i.select(".pop").remove()})),document.querySelector("#population-graph-spacer").innerHTML="",document.querySelector("#population-graph-label").innerHTML="",document.querySelector("#population-graph-spacer").setAttribute("style","width: 25%;"),document.querySelector("#population-graph-label").setAttribute("style","text-align: center; font-size: 0.875rem; margin: 0 auto; width: 75%;"),document.querySelector("#population-graph-label").innerHTML="AGE IN YEARS"},ct=e=>{if(d3.select("#english-percent-bar").remove(),d3.select("#english-pop-header","text").remove(),"NaN"===e.value)return;d3.select("#english-pop-percentage").insert("div","div").attr("id","english-percent-bar").attr("width","100%").attr("height","100%").append("svg").attr("id","english-speaking-svg");const t=[100.01,e.value],r="100.0"===t[1]?"100%":`${t[1]}%`,i=d3.scaleOrdinal().domain(t).range(["#032235","#0285a8"]),n=d3.select("#english-speaking-svg").attr("class","bar").attr("width","100%").attr("height","100%").attr("viewBox","0 0 350 65").attr("preserveAspectRatio","none"),a=n.append("g").attr("transform","translate(175, 27.5)"),s=d3.scaleLinear().domain([0,d3.max(t)]).range([0,350]);n.selectAll("rect").data(t).enter().append("rect").attr("width",s).attr("height",30.01).attr("fill",(e=>i(e))),n.append("text").attr("dy","1.4em").attr("dx","1.5em").attr("x",175).attr("text-anchor","end").style("fill",""+(r.length>6?"#07698C":"white")).style("font-weight","bold").text(r),a.insert("text").attr("id","english-pop-header").attr("dy","1.7em").attr("text-anchor","middle").text("SPEAKS ENGLISH").attr("fill","#efefef")},pt=e=>{if(d3.select("#vehicle-percent-bar").remove(),d3.select("#vehicle-pop-header").remove(),"NaN"===e.value)return;d3.select("#vehicle-pop-percentage").insert("div","div").attr("id","vehicle-percent-bar").attr("width","100%").attr("height","100%").append("svg").attr("id","vehicle-svg");const t=[100.01,e.value],r="100.0"===t[1]?"100%":`${t[1]}%`,i=d3.scaleOrdinal().domain(t).range(["#032235","#0285a8"]),n=d3.select("#vehicle-svg").attr("class","bar").attr("width","100%").attr("height","100%").attr("viewBox","0 0 350 55").attr("preserveAspectRatio","none"),a=n.append("g").attr("transform","translate(175, 27.5)"),s=d3.scaleLinear().domain([0,d3.max(t)]).range([0,350]);n.selectAll("rect").data(t).enter().append("rect").attr("width",s).attr("height",30.01).attr("fill",(e=>i(e))),n.append("text").attr("dy","1.4em").attr("dx","1.5em").attr("x",175).attr("text-anchor","end").style("fill",""+(r.length>6?"#07698C":"white")).style("font-weight","bold").text(r),a.insert("text").attr("id","vehicle-pop-header").attr("dy","1.7em").attr("text-anchor","middle").text("HAS VEHICLE").attr("fill","#efefef")},mt=({aggregateEcoObj:e,consolidatedWHPClass:t})=>{const r=[{name:"VERY HIGH",value:e?e.WHPClass["Very High"]:t["Very High"]},{name:"HIGH",value:e?e.WHPClass.High:t.High},{name:"MODERATE",value:e?e.WHPClass.Moderate:t.Moderate},{name:"LOW",value:e?e.WHPClass.Low:t.Low},{name:"VERY LOW",value:e?e.WHPClass["Very Low"]:t["Very Low"]}];ut({wildfireRiskData:r})},ut=({wildfireRiskData:e})=>{const t=e;if(d3.select("#wildfire-risk-graph").remove(),document.querySelector("#wildfire-risk-data-control").innerText="",0===t.reduce(((e,t)=>e+t.value),0))return document.querySelector("#wildfire-risk-data-control").innerText="",void(document.querySelector("#wildfire-risk-header").innerText="");const r=15,i=45,n=170-r-10;d3.select("#wildfire-risk").append("div","div").attr("id","wildfire-risk-graph").attr("width","100%").attr("height","100%").append("svg").attr("id","wildfire-risk-graph-svg").attr("transform","translate(0, 0)");const a=d3.scaleOrdinal().domain(t).range(["#993131","#B6673E","#D3AA5F","#C1B999","#707767"]),s=d3.select("#wildfire-risk-graph-svg").attr("height","100%").attr("width","100%").attr("viewBox","-45 0 340 170").attr("preserveAspectRatio","none").style("overflow","visible"),o=s.append("g").attr("transform",`translate(${i}, ${r})`),l=d3.scaleLinear().domain([0,d3.max(t,(e=>e.value))]).range([0,340]),d=d3.scaleBand().domain(t.map((e=>e.name))).range([0,n]).padding(-.1),c=d3.axisBottom(l),p=d3.axisLeft(d);o.append("g").call(p).selectAll(".domain, .tick line").remove();o.append("g").call(c).attr("transform","translate(0, 170)").selectAll(".domain, .tick").remove(),s.selectAll(".bar").data(t).enter().append("g").attr("transform",`translate(${i}, 22)`).append("rect").attr("class","fire-rect-bar").attr("y",((e,t)=>d(e.name,t))).attr("width",(e=>e.value>0?200*e.value:4)).attr("height","20px").attr("fill",(e=>a(e.name))),s.selectAll(".bar").data(t).enter().append("text").attr("transform",`translate(${i+10}, 38)`).attr("class","riskPercent").attr("x",(e=>195*e.value)).attr("y",((e,t)=>d(e.name,t))).attr("fill","#EFEFEF").style("font-weight","bold").text((e=>e.value>0?`${Math.round(100*e.value)}%`:"0%"))},yt=e=>{document.querySelector("#drought-condition").innerHTML=`<div style = "display: flex;">\n          <div style = "width: max-content;">\n            <p style="margin-bottom: 0">DROUGHT STATUS</p>\n          </div>\n          <div style = "margin: -6px 0 0 10px;">\n            <h4 class = "bold trailer-0"> \n            ${e}\n            </h4>\n          </div>\n        </div>`;e||(document.querySelector("#drought-condition").innerHTML="")},gt=()=>{document.querySelector("#temp-wind-aq").innerHTML='\n      <div class="loader is-active padding-leader-3 padding-trailer-3">\n        <div class="loader-bars"></div>\n        <div class="loader-text">Loading...</div>\n      </div>'},ht=({temp:e,wind:t,airQualityToday:r,airQualityTomorrow:i})=>{const n=r,a=i;(async e=>{e.renderWeather?document.querySelector("#temp-wind-aq").innerHTML=`\n          <div style = "\n                    display: grid; \n                    grid-template-columns: repeat(3, minmax(0, 1fr));\n                    grid-template-rows: auto auto auto;\n                    gap: 0px;\n                    margin: auto;">\n                        <div class="item-1" style = "margin: 15px 0 10px -5px; text-align: center;">\n                          <span class="unit-conversion underline" style = "cursor: pointer; display: block; margin: -5px 0 -15px 0;">&degF MPH</span>\n                          </br>\n                          <span class="unit-conversion" style = "cursor: pointer;">&degC KM/H</span>\n                        </div>\n                        <div class="item-2" style = "padding: 25px 0; text-align: center;">\n                          <span>TODAY</span>\n                        </div>\n                        <div class="item-3" style = "padding: 25px 0; text-align: center;">\n                          <span>TOMORROW</span>\n                        </div>\n                        <div class="item-4">\n                          <p style = "margin: 1rem; text-align: center;">TEMP</p>\n                        </div>\n                        <div id = "today-temp" \n                        style = "border: 1px solid; border-style: none solid none solid;">\n                          <p style="margin: 1rem; text-align: center;">${e.todayF}</p>\n                        </div>\n                        <div id = "tomorrow-temp">\n                           <p style="margin: 1rem; text-align: center;">${e.tomorrowF}</p>\n                        </div>\n                        <div class="item-7" \n                        style = "border: 1px solid; border-style: solid none solid none;">\n                          <p style = "margin: 1rem; text-align: center;">WIND</p>\n                        </div>\n                        <div id = "today-wind" \n                        style = "border: 1px solid;">\n                          <p style="margin: 1rem; text-align: center;"> ${t.today.mph} </p>\n                        </div>\n                        <div id= "tomorrow-wind" \n                        style = "border: 1px solid; border-style: solid none solid none;">\n                        <p style="margin: 1rem; text-align: center;"> ${t.today.mph} </p></div>\n                        <div style = "display: flex;">\n                          <p  style = "margin-top: 20px; text-align: center; line-height: 20px;">AIR QUALITY INDEX</p>\n                        </div>\n                        <div id = "aqi-current" \n                        style = "border: 1px solid; border-style: none solid none solid">\n                          <p style="margin: auto;\n                                    text-align: center;\n                                    padding: 20px 5px;\n                                    line-height: 21px;"> ${n} </p>\n                        </div>\n                        <div id = "aqi-forecast">\n                          <p style="margin: auto;\n                                    text-align: center;\n                                    padding: 20px 5px;\n                                    line-height: 21px;""> ${a} </ptrailer-0>\n                        </div>\n                      </div>\n    `:setTimeout((()=>document.querySelector("#temp-wind-aq").innerHTML=""),1e3)})(e),(e=>{e.renderWeather?T[1].innerHTML='<p class = "trailer-0 padding-trailer-0 sectionHeader">WEATHER</p>\n                                     <p class = "trailer-0 padding-leader-0 sectionSubHeader">At location</p>':T[1].innerHTML=""})(e),vt({temp:e,wind:t})},vt=({temp:e,wind:t})=>{const r=document.querySelectorAll(".unit-conversion"),i=document.querySelector("#today-temp"),n=document.querySelector("#tomorrow-temp"),a=document.querySelector("#today-wind"),s=document.querySelector("#tomorrow-wind"),o=`<p style="margin: 1rem; text-align: center;">${e.todayF}</p>`,l=`<p style="margin: 1rem; text-align: center;">${e.todayC}</p>`,d=`<p style="margin: 1rem; text-align: center;">${e.tomorrowF}</p>`,c=`<p style="margin: 1rem; text-align: center;">${e.tomorrowC}</p>`,p=`<p style="margin: 1rem; text-align: center;"> ${t.today.mph} </p>`,m=`<p style="margin: 1rem; text-align: center;"> ${t.today.kph} </p>`,u=`<p style="margin: 1rem; text-align: center;"> ${t.tomorrow.mph} </p>`,y=`<p style="margin: 1rem; text-align: center;"> ${t.tomorrow.kph} </p>`;r.forEach((e=>{e.addEventListener("click",(e=>{!e.target.classList.contains("underline")&&(r.forEach((e=>{e.classList.remove("underline")})),e.target.classList.add("underline")),e.target.innerText.includes("F")?(i.innerHTML=o,n.innerHTML=d,a.innerHTML=p,s.innerHTML=u):(i.innerHTML=l,n.innerHTML=c,a.innerHTML=m,s.innerHTML=y)}))}))},bt=({totalRadiusPopulation:e,perimeterPopulation:t})=>{const r=e?"Estimated (2 mile radius)":"Estimated within fire perimeter",i=(T[2].innerHTML=`<p class = "trailer-0 sectionHeader">POPULATION</p>\n                                                               <p class = "trailer-0 sectionSubHeader">${r}</p>`,e||t),n=({populationObject:e})=>{document.querySelector("#general-population").innerHTML=`\n      <div style = "margin-bottom: 10px;">\n      <h3 class= "bold">${e.totalPopulation}</h3>\n      <p style = "margin: -5px auto -5px"> POPULATION </p>\n      </div>\n    `};(()=>{if(!i.totalPopulation)return document.querySelector("#disability").innerHTML="",document.querySelector("#poverty").innerHTML="",n({populationObject:i});n({populationObject:i}),(({populationObject:e})=>{document.querySelector("#poverty").innerHTML=`\n    <div style = "margin-bottom: 10px;">\n    <h3 class = "bold text-center">${e.percentofPopulationWithDisability}</h3>\n    <p class= "text-center" style = "margin: -5px auto -5px; text-align: left;">POVERTY</p>\n    </div>\n    `})({populationObject:i}),(({populationObject:e})=>{document.querySelector("#disability").innerHTML=`\n    <div style = "margin-bottom: 10px;">\n    <h3 class = "bold text-center">${e.percentofPopulationInPoverty}</h3>\n    <p class= "text-center" style = "margin: -5px auto -5px; text-align: left;">DISABILITY</p>\n    </div>\n    `})({populationObject:i})})()},ft=({radiusHousingData:e,perimeterHousingData:t})=>{const r=e?"Estimated (2 mile radius)":"Estimated within fire perimeter",i=(T[3].innerHTML=`<p class = "trailer-0 sectionHeader">HOUSING</p>\n                                                              <p class = "trailer-0 sectionSubHeader">${r}</p>`,e||t);i.TotalHousingUnits&&i.MedianValue?(document.querySelector("#housing-container").style.display="grid",document.querySelector("#housing-container-stats").innerHTML=`\n      <div style = "margin-bottom: 10px">\n      <h4 class= "bold">${i.TotalHousingUnits}</h4>\n        <p style = "margin-bottom: -5px;">TOTAL HOUSING UNITS </p> \n      </div>\n      <div>\n      <h4 class = "bold" style = "line-height: 1.2;">${i.MedianValue}</h4>\n        <p style = "margin-bottom: -5px;"> MEDIAN HOME VALUE </p>\n      </div>\n    `):(document.querySelector("#housing-container-stats").innerHTML="",document.querySelector("#housing-container").style.display="none",T[3].innerHTML="")},wt=({aggregateEcoObj:e,perimeterEcology:t})=>{const r=e?"Estimated (2 mile radius)":"Estimated within fire perimeter",i='<h4 class = "bold">None present</h4>';(({ecoObject:e})=>{(({ecoObject:e})=>{e.L3EcoReg||e.LandForm||e.ForestTypeGroup||!e.RichClass?(I[4].style.display="initial",T[4].innerHTML=`<p class = "trailer-0 sectionHeader">ECOSYSTEM</p>\n                                                <p class = "trailer-0 sectionSubHeader">${r}</p>`):(I[4].style.display="none",T[4].innerHTML="")})({ecoObject:e}),(({ecoObject:e})=>{if(e.L3EcoReg&&"null"!==e.L3EcoReg)return document.querySelector("#ecoregion").innerHTML=`\n     <div>\n        <p class = "trailer-0">ECOREGION</p>\n        <div style = "margin-bottom: 15px;">\n          <h4 class = "bold" style = "margin-top: -7px; ">${e.L3EcoReg}</h4>\n        </div>\n      </div>`;document.querySelector("#ecoregion").innerHTML=""})({ecoObject:e}),(({ecoObject:e})=>{e.LandForm?document.querySelector("#landform").innerHTML=`\n        <div>\n            <p class = "trailer-0">LANDFORM TYPE</p>\n            <div style = "margin-bottom: 15px;">\n              <h4 class = "bold" style = "margin-top: -7px;">${e.LandForm}</h4>\n            </div>\n          </div>`:document.querySelector("#landform").innerHTML=""})({ecoObject:e}),(({ecoObject:e})=>{e.ForestTypeGroup?document.querySelector("#forestType").innerHTML=`\n        <div>\n          <p style = "margin-bottom: 2px;">PREDOMINANT FOREST TYPE GROUPS</p>\n          <div class = "ecoregionInformation">\n            <h4 class = "bold">${e.ForestTypeGroup.length>1?e.ForestTypeGroup[0].trim()+" and "+e.ForestTypeGroup[1].trim():e.ForestTypeGroup[0].trim()}</h4>\n          </div>\n        </div>`:document.querySelector("#forestType").innerHTML=""})({ecoObject:e}),(({ecoObject:e})=>{e.SumCarbon?document.querySelector("#carbon").innerHTML=`\n      <div  style="margin-top: 15px;>\n        <p style = "margin-bottom: 2px;">POTENTIAL CARBON LOSS</p>\n        <div class = "ecoregionInformation">\n          <div style = "position: relative;">            \n            <h4 class = "bold">${e.SumCarbon.toLocaleString()} tons</h4>\n            </div>\n          </div>\n      </div>\n      `:document.querySelector("#carbon").innerHTML=""})({ecoObject:e}),(({ecoObject:e})=>{e.RichClass?document.querySelector("#biodiversity").innerHTML=`\n          <div style = "margin-bottom: 1.5625rem;">\n            <div style = "width: 100%;">\n              <div>\n              <p class = "trailer-0">BIODIVERSITY</p>\n            </div>\n            <div style ="width: 100%; display: flex; text-align: center;">\n              <div style = "width: 50%; text-align: center; align-self: center;">\n              <h4 class = "bold">${e.RichClass}</h4>\n                  <p style ="margin-bottom: 5px; margin-top: 5px;">Imperiled Species Biodiversity</p>\n              </div>\n              <div style = "width: 70%;">\n              <div style = "width: 100%;">\n                <img src="https://www.arcgis.com/sharing/rest/content/items/668bf6e91edd49d1bb8b3f00d677b315/data"\n                  style="width:77px; height:77px;\n                  // margin-right: 10px; \n                  display: inline-flex;" \n                  viewbox="0 0 70 70" \n                  class="svg-icon" \n                  type="image/svg+xml">\n                <img src="https://www.arcgis.com/sharing/rest/content/items/bc5dc73ad7d345de840c128cc42cc938/data"\n                  style="width:77px; height:77px; \n                  display: inline-flex;" \n                  viewbox="0 0 70 70" \n                  class="svg-icon" \n                  type="image/svg+xml">\n                <img src="https://www.arcgis.com/sharing/rest/content/items/96a4af6a248b4da48f1b7bd703f88485/data"\n                  style="width:77px; height:77px;\n                  // margin-right: 7px;\n                  display: inline-flex;" \n                  viewbox="0 0 70 70" \n                  class="svg-icon" \n                  type="image/svg+xml">\n                <img src="https://www.arcgis.com/sharing/rest/content/items/3c9e63f9173a463ba4e5765c08cf7238/data"\n                  style="width:77px; height:77px; \n                  display: inline-flex;" \n                  viewbox="0 0 70 70" \n                  class="svg-icon" \n                  type="image/svg+xml">\n                </div> \n              </div>\n            </div>\n          </div>`:document.querySelector("#biodiversity").innerHTML=""})({ecoObject:e}),(({ecoObject:e})=>{e.CritHab?document.querySelector("#criticalHabitat").innerHTML=`\n      <div style = margin-top: 10px>\n        <p style = "margin-bottom: 2px;">CRITICAL HABITAT DESIGNATION</p>\n        <div class = "ecoregionInformation">\n          <h4 class = "bold">${e.CritHab}</h4>\n        </div>\n      </div>`:document.querySelector("#criticalHabitat").innerHTML=`\n      <div style = margin-top: 10px>\n        <p style = "margin-bottom: 2px;">CRITICAL HABITAT DESIGNATION</p>\n        <div class = "ecoregionInformation">\n          <h4 class = "bold">${i}</h4>\n        </div>\n      </div>`})({ecoObject:e}),(({ecoObject:e})=>{if(e.OwnersPadus){const t=`<h4 class = "bold">${e.OwnersPadus.join(", ")}</h4>`,r=`<p class = "bold">${e.OwnersPadus.join(", ")}</p>`;return document.querySelector("#protectedAreas").innerHTML=`\n      <div>\n        <p style = "margin-bottom: 2px;">PUBLIC LANDS & PROTECTED AREAS</p>\n        <div class = "ecoregionInformation">\n          <div>${e.OwnersPadus.length<4?t:r}</div>\n        </div>\n      </div>`}document.querySelector("#protectedAreas").innerHTML=`\n      <div>\n        <p style = "margin-bottom: 2px;">PROTECTED AREAS, TRIBAL LANDS, </br>& WILDERNESS AREAS</p>\n        <div class = "ecoregionInformation">\n          <div>${i}</div>\n        </div>\n      </div>`})({ecoObject:e})})({ecoObject:e||t})}}));